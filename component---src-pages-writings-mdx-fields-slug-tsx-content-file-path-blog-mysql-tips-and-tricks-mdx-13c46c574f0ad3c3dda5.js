/*! For license information please see component---src-pages-writings-mdx-fields-slug-tsx-content-file-path-blog-mysql-tips-and-tricks-mdx-13c46c574f0ad3c3dda5.js.LICENSE.txt */
(self.webpackChunksteebe_dev=self.webpackChunksteebe_dev||[]).push([[819],{4184:function(e,t){var n;!function(){"use strict";var l={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var i in n)l.call(n,i)&&n[i]&&e.push(i)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},757:function(e,t,n){"use strict";var l=n(4836);t.M=void 0;var a=l(n(434)),r=l(n(7071)),o=l(n(7294)),i=l(n(5697)),u=["children"],c=o.default.forwardRef((function(e,t){var n=e.children,l=(0,r.default)(e,u);return o.default.createElement("a",(0,a.default)({ref:t},l,{onClick:function(e){"function"==typeof l.onClick&&l.onClick(e);var t=!0;return(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.defaultPrevented)&&(t=!1),l.target&&"_self"!==l.target.toLowerCase()&&(t=!1),window.gtag?window.gtag("event","click",{event_category:"outbound",event_label:l.href,transport_type:t?"beacon":"",event_callback:function(){t&&(document.location=l.href)}}):t&&(document.location=l.href),!1}}),n)}));t.M=c,c.propTypes={href:i.default.string,target:i.default.string,onClick:i.default.func}},4832:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var l=n(1151),a=n(7294);function r(e){const t=Object.assign({h1:"h1",p:"p",h3:"h3",code:"code",pre:"pre",ul:"ul",li:"li"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.h1,null,"MySQL - Helpful Tidbits"),"\n",a.createElement(t.p,null,"My experiences at Rev360 (RevolutionEHR) and Mercato brought about developing for back-ends that leverage MySQL for data storage solutions. All my other previous experiences were within the context of Oracle, DB2, and SQL Server database technologies, and I found myself constantly Googling to see how to do things better in MySQL. Below are some of those findings."),"\n",a.createElement(t.h3,null,"Perform batch UPDATEs with a temp table"),"\n",a.createElement(t.p,null,"When performing ",a.createElement(t.code,null,"UPDATE"),"s against a table in bulk, MySQL is pretty non-performant when given a raw ",a.createElement(t.code,null,"UPDATE")," statement with a ",a.createElement(t.code,null,"WHERE")," clause:"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-sql"},"UPDATE A\nSET foo = 'bar' WHERE id < 1000;\n")),"\n",a.createElement(t.p,null,"The best way of handling bulk ",a.createElement(t.code,null,"UPDATE"),"s turns out to be establishing a temp table containing the values that encapsulate the data for the ",a.createElement(t.code,null,"UPDATE"),", and then performing the ",a.createElement(t.code,null,"UPDATE")," with a ",a.createElement(t.code,null,"JOIN")," against the temporary table."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-sql"},"DROP TABLE IF EXISTS `tempFooValues`;\n\nCREATE TABLE `tempFooValues` (\n`id` INT(11) UNSIGNED NOT NULL,\n`foo` VARCHAR(255) NOT NULL,\nPRIMARY KEY(`id`)\n);\n\nINSERT INTO tempFooValues (id, foo) VALUES\n(1, 'bar'),\n(2, 'bar'),\n...,\n...,\n(1000, 'bar');\n\nUPDATE A\nINNER JOIN tempFooValues ON tempFooValues.id = A.id\nSET\nA.foo = tempFooValues.foo;\n")),"\n",a.createElement(t.h3,null,"Leveraging CASE within a JOIN"),"\n",a.createElement(t.p,null,"This one is pretty self-explanatory..."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-sql"},"SELECT * FROM A\nJOIN B\nON CASE\nWHEN B.type IN (1, 3) AND B.a_id = A.id THEN 1\nWHEN B.type IN (2) AND B.other_id = A.other_id THEN 1\nELSE 0\nEND = 1;\n")),"\n",a.createElement(t.h3,null,"Converting Timezones from UTC"),"\n",a.createElement(t.p,null,'The arguments for the "from" and "to" timezones in ',a.createElement(t.code,null,"CONVERT_TZ")," are the offsets from\nUTC. Therefore, ",a.createElement(t.code,null,"+00:00")," is itself UTC, and ",a.createElement(t.code,null,"-07:00")," would equate to PT in the U.S."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-sql"},"SELECT CONVERT_TZ(created, '+00:00','-07:00') FROM users;\n")),"\n",a.createElement(t.h3,null,"Performing Maintenance on Huge Tables"),"\n",a.createElement(t.p,null,"Old faithful has been holding down the fort for 9 years. It's full of juicy data that's\nboth important for reporting and critical for application business logic for end users.\nIt is also missing a ton of helpful index values underneath the columns matter most."),"\n",a.createElement(t.p,null,"Your reports won't report, and you know in your gut that ",a.createElement(t.code,null,"ALTER TABLE")," in real time on\nold faithful will take about 10,000 years to execute."),"\n",a.createElement(t.p,null,"So, you perform the following:"),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"Create a new table that contains the index values you require"),"\n",a.createElement(t.li,null,"Copy the data from old faithful into this clone table with indices"),"\n",a.createElement(t.li,null,"Rename (or drop) the original old faithful, and rename the clone to become old faithful"),"\n"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-sql"},"BEGIN;\n\nCREATE TABLE IF NOT EXISTS oldFaithfulWithIndices LIKE oldFaithful;\n\nALTER TABLE oldFaithfulWithIndices\n    ADD INDEX `account_id_index`(`account_id`),\n    ADD INDEX `email_address_index`(`email_address`),\n    ADD INDEX `created_datetime_index`(`created_datetime`),\n    ADD INDEX `updated_datetime_index`(`updated_datetime`);\n\nINSERT INTO oldFaithfulWithIndices SELECT * FROM oldFaithful;\n\nRENAME TABLE oldFaithful TO oldFaithful_archive;\n\nRENAME TABLE oldFaithfulWithIndices TO oldFaithful;\n\nCOMMIT;\n")))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,l.ah)(),e.components);return t?a.createElement(t,e,a.createElement(r,e)):r(e)},i=n(8351),u=n(6653);const c=e=>{let{data:t,children:n}=e;return a.createElement(i.Z,null,a.createElement("p",{className:u.hT},a.createElement("i",null,t.mdx.frontmatter.date),a.createElement("br",null),t.mdx.frontmatter.updated&&a.createElement("i",null,"(Updated on ",t.mdx.frontmatter.updated,")")),a.createElement("div",{className:u.v_},n))};function s(e){return a.createElement(c,e,a.createElement(o,e))}},8351:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var l=n(7294),a=n(4160),r=n(757),o=n(5707),i="layout-module--nav-link-item--fbd31",u=n(4184),c=n.n(u);const s="steebe - ",d={HOME:s+"HOME",PHOTOS:s+"PHOTOS",TOOLS:s+"TOOLS",BLOG:s+"BLOG",ABOUT:s+"ABOUT"};let m=function(e,t){switch(this.current=e,this.title=t,this.linkLabel=t.replace(s,""),this.linkPath="/",t){case d.HOME:this.linkPath="/";break;case d.PHOTOS:this.linkPath="/photos";break;case d.TOOLS:this.linkPath="/tools";break;case d.BLOG:this.linkPath="/writings";break;case d.ABOUT:this.linkPath="/about"}this.classNames=[o.cP,e?o.H_:null]};var f=e=>{let{children:t}=e;const n="undefined"!=typeof window?window.location.pathname:void 0,u=null==n?void 0:n.includes("photos"),s=null==n?void 0:n.includes("tool"),f=null==n?void 0:n.includes("about"),h=(null==n?void 0:n.endsWith("writings"))||(null==n?void 0:n.endsWith("writings/"))||(null==n?void 0:n.includes("writings")),E=[new m("/"===n||!s&&!f&&!h&&!u,d.HOME),new m(s,d.TOOLS),new m(h,d.BLOG),new m(f,d.ABOUT)];return l.createElement("div",{className:"layout-module--container--4f29e"},l.createElement("title",null,E.filter((e=>e.current)).map((e=>e.title))),l.createElement("nav",null,l.createElement("ul",{className:"layout-module--nav-links--a181c"},E.map((e=>l.createElement("li",{key:e.title,className:i},l.createElement(a.rU,{to:e.linkPath,className:c()(e.classNames)},e.linkLabel)))))),l.createElement("main",null,t),l.createElement("footer",{className:`${o.hr} layout-module--footer--f8364`},l.createElement("div",{className:"layout-module--resume--53a60"},l.createElement("a",{href:"./steve_bass_resume.pdf",className:o.cP,target:"_blank"},"RESUME")),l.createElement(r.M,{href:"https://www.github.com/steebe",target:"_blank",className:`${o.cP} ${i}`,rel:"noreferrer"},"GITHUB"),l.createElement(r.M,{href:"https://www.linkedin.com/in/steebe",target:"_blank",className:o.cP,rel:"noreferrer"},"LINKEDIN")))}},5707:function(e,t,n){"use strict";n.d(t,{Gn:function(){return o},H_:function(){return a},cP:function(){return r},hr:function(){return l}});var l="globals-module--centered-text--f1021",a="globals-module--nav-link-current-item--312f0",r="globals-module--nav-link-text--78591",o="globals-module--site-image--59f09"},6653:function(e,t,n){"use strict";n.d(t,{YT:function(){return r},hT:function(){return l},v_:function(){return a}});var l="writings-module--date--4bb92",a="writings-module--post--fa2ad",r="writings-module--preview-container--33267"},434:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7071:function(e){e.exports=function(e,t){if(null==e)return{};var n,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},1151:function(e,t,n){"use strict";n.d(t,{ah:function(){return r}});var l=n(7294);const a=l.createContext({});function r(e){const t=l.useContext(a);return l.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}}}]);
//# sourceMappingURL=component---src-pages-writings-mdx-fields-slug-tsx-content-file-path-blog-mysql-tips-and-tricks-mdx-13c46c574f0ad3c3dda5.js.map